import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup, WebAppInfo
from telegram.ext import Application, CommandHandler, ContextTypes

# إضافة ?v=2 لضمان تحديث الواجهة عند المستخدمين
WEB_APP_URL = "https://satoshyman.github.io/Ana.bot/?v=2"
TOKEN = "7951951098:AAH7ETMKV7erxtwTjj_4Y9Rkpcwl42Hsdkg"

logging.basicConfig(level=logging.INFO)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [[InlineKeyboardButton("⚡ ابدأ التعدين السحابي", web_app=WebAppInfo(url=WEB_APP_URL))]]
    await update.message.reply_text(
        "مرحباً بك في Ana Mining PRO ⛏️\n\n"
        "نظام التعدين السحابي الجديد أصبح جاهزاً.\n"
        "اضغط أدناه لبدء جلستك (0.0625$ كل 6 ساعات).",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

def main():
    print("--- Bot Started with Cache Breaker ---")
    application = Application.builder().token(TOKEN).build()
    application.add_handler(CommandHandler("start", start))
    application.run_polling()

if __name__ == '__main__':
    main()
